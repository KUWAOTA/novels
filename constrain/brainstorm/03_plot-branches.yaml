# ============================================================
# Constrain — ストーリー分岐ツリー（git風）
# ============================================================
# status: draft（マッキー読了前のブレインストーミング段階）
#
# ⚠️ これらは全て「ありうる可能性」です。
#    確定的なプロットではありません。
#    マッキー理論学習後に取捨選択します。
#
# 分岐の読み方:
#   main      = 最も合意度の高い基本の流れ
#   branch/*  = main から分岐する代替案
#   status    = preferred | candidate | deferred | rejected
# ============================================================

# ══════════════════════════════════════════════════════════════
# MAIN — 基本プロットライン
# ══════════════════════════════════════════════════════════════
main:
  status: preferred
  summary: >
    人の感情や空気が理解できず傷ついてきた主人公は、
    「再現性」と「厳密な言語」に救われる。
    やがて曖昧さを排除し、誰にとっても誤解のない言葉だけで
    構成された世界を作ろうとする。
    しかし成功の先で、正しく理解できることと
    誰かと共に生きていることは別だと気づく。
    「分かる」ことと「触れる」ことのあいだで揺れながら、
    他者の世界を旅し、抱擁するための曖昧さに向き合っていく。

  # ────────────────────────────────────
  # ACT 1: 原点 — 再現性の獲得
  # ────────────────────────────────────
  act_1:
    label: "原点 — 再現性への目覚め"
    time: "子供時代〜青年期"
    status: preferred

    beat_sequence:
      - id: M-1-1
        description: >
          ASD傾向により空気が読めない主人公。
          共感のルールが分からず地雷を踏みいじめられる。
        value_change: "安全 → 危険 (孤立)"

      - id: M-1-2
        description: >
          母の「努力しろ」に再現性がないことに気づく。
          カフェで集中できる法則を自力で発見。
        value_change: "無力 → 手段の獲得"

      - id: M-1-3
        description: >
          数学/物理の熱い先生と出会い、
          言語によって分かり合える美しさ、再現性の価値を知る。
        value_change: "孤立 → 繋がりの萌芽（ただし本人は気づかず）"
        irony: >
          人間との繋がりが生じているのに、
          言語のルール的側面だけを吸収してしまう。

      - id: M-1-4
        description: >
          他者の行動を説明する仮説モデルを構築し、
          再現可能な言語化で適応していく。
          暗黙の了解で生きている他者よりも他者のことが分かるようになる。
        value_change: "不適応 → 適応（過剰適応の兆し）"

      - id: M-1-5
        description: >
          同じく凸凹がある女性から尊敬・恋心を抱かれる。
          自信をつけていく。
        value_change: "孤立 → 承認"

    act_1_climax:
      description: >
        再現性と厳密さこそが正しいという信念を確立。
        曖昧さを排除する思想へと傾倒し始める。
      value_state: "再現性を絶対視する世界観の完成"

  # ────────────────────────────────────
  # ACT 2: 上昇と歪み — Constrainの時代
  # ────────────────────────────────────
  act_2:
    label: "上昇と歪み — いけ好かないエリート"
    time: "社会人時代"
    status: preferred

    beat_sequence:
      - id: M-2-1
        description: >
          曖昧な表現をする人を不誠実（嘘つき・危険）とみなすようになる。
          いけ好かないエリートになる。
        value_change: "適応 → 支配/排他"

      - id: M-2-2
        description: >
          「Constrain」を開発。Haskellで書かれた文章作成コンパイラ。
          理科系の作文技術に則った厳密で明確で紛れのない文を強制する。
        note: "Constrainは主人公の写し身"

      - id: M-2-3
        description: >
          ビジネス向けにウケて成功する。
          Constrain事業をベンチャーCTOとして経営。
        value_change: "能力 → 社会的成功"

      - id: M-2-4
        label: "立場の逆転"
        description: >
          下請けテスターとして登場したA（かつてのいじめっ子）を、
          主人公が厳密な言葉で追い詰める立場になる。
        dramatic_irony: >
          いじめられっ子がいじめっ子になっている。
          しかも本人は気づいていない。
        value_change: "正義 → 加害（無自覚）"

    act_2_branching_point: >
      ここからストーリーがいくつかの方向に分岐する可能性がある。
      下記の branch/* を参照。

  # ────────────────────────────────────
  # ACT 3: 転換 — 瓦解と再統合
  # ────────────────────────────────────
  act_3:
    label: "転換 — 曖昧さの受容"
    time: "転換期〜結末"
    status: "複数分岐あり（下記 branch 参照）"
    
    note: "現在branch_rigorous_triumphが採用案"

# ══════════════════════════════════════════════════════════════
# BRANCH: 再現性の信仰崩壊ルート（旅に出る編）
# ══════════════════════════════════════════════════════════════
branch_faith_collapse:
  parent: "main.act_2_branching_point"
  status: rejected  # 曖昧さへの飛躍が描けず未完成のためボツ
  label: "信仰崩壊 — 旅に出る"

  concept: >
    再現性の信仰が崩れ、全てを捨てて旅に出るルート。
    曖昧さの価値を旅の中で発見する。

  rejection_reason: >
    曖昧さに意味を持たせるところが未完成。
    カタルシスに至る論理が弱い。

# ══════════════════════════════════════════════════════════════
# BRANCH: 悲劇と統合（自殺・崩壊・ジンテーゼ編）
# ══════════════════════════════════════════════════════════════
branch_tragedy:
  parent: "main.act_2_branching_point"
  status: preferred
  label: "悲劇と統合"

  concept: >
    厳密さを武器にして部下Aを追い詰め、自殺（未遂）させてしまう。
    自分の信じた「正しさ」が人を殺した事実に直面し、一度は全てを否定（Constrain撤廃）する。
    しかし、それによる現場の混乱（カオス）を目撃し、
    「厳密さ（構造）は必要だが、それを罰（武器）に使ってはならない」というジンテーゼに至る。

  beat_sequence:
    - id: TR-1
      label: "Aへの尋問（復讐）"
      description: >
        ミスをしたAに対し、再発防止と称して「なぜ？」を繰り返す尋問（なぜなぜ分析の悪用）を行う。
        正義の執行のつもりだが、深層心理ではかつてのいじめに対する復讐。
      value_change: "正義 → 暴力"

    - id: TR-2
      label: "Aの自殺（大失敗）"
      description: >
        追い詰められたAが自殺を図る。
        「お前の言うことは正しいよ。でも、もう生きられない」
        完璧な論理が人を殺した（殺しかけた）という決定的な敗北。
      value_change: "勝利 → 喪失"

    - id: TR-3
      label: "復讐欲の自覚（心理的転回点）"
      description: >
        「なぜそこまで追い詰めたのか？」自分に問いかける中で、
        正義だと思っていた行動の裏に、「かつてのいじめっ子Ａを傷つけたい」という
        昏い復讐の欲望があったことに気づく。
        自分は正義の執行者などではなく、ただの復讐者だった。
      value_change: "保身 → 自己嫌悪"

    - id: TR-4
      label: "全否定（Constrain撤廃）"
      description: >
        自分という人間が信じられなくなり、自分の作った道具（武器）を恐れるようになる。
        Constrainを即座に停止し、社内の厳密なルールを全て撤廃する。
        「これからは自由にやってくれ。僕は間違っていた」
      value_change: "確信 → 拒絶"

    - id: TR-5
      label: "組織の崩壊（カオス）"
      description: >
        ルールとツールを失った現場は大混乱に陥る。
        定義のない仕様書、言った言わないの水掛け論、低下する品質。
        社員たちは疲弊し、主人公に懇願する。
        「お願いです、ガイドラインを戻してください！ 私たちには基準が必要なんです！」
      value_change: "自由 → 混沌"

    - id: TR-6
      label: "ジンテーゼ（統合）"
      description: >
        主人公は気づく。
        Constrain（構造・厳密さ）自体が悪かったのではない。
        それを使って他人を裁き、マウントを取り、支配しようとした自分の「心」が問題だったのだ。
        「構造は、人を守るためにあるべきだ。傷つけるためではなく」
        彼はConstrainを再起動する。ただし、罰するための機能（ログ監視や強制力）を調整し、
        「人を助けるための厳密さ」として再定義する。
      value_change: "否定 → 統合"

# ══════════════════════════════════════════════════════════════
# BRANCH: 厳密化の勝利と代償（単一責任編）
# ══════════════════════════════════════════════════════════════
branch_rigorous_triumph:
  parent: "main.act_2_branching_point"
  status: candidate  # preferred から変更
  label: "厳密化による和解と代償"

  concept: >
    「曖昧さ」に逃げず、「言語化・厳密化・再現性」を突き詰めることで
    主人公が世界（他者）と分かり合うルート。
    しかしその厳密さが、割り切れない感情を持つ者（A）を傷つけ、
    「これでよかったのか？」という問いを残して終わる。

  beat_sequence:
    - id: RT-1
      label: "Bとの対話（論理的解決）"
      description: >
        B（直感的クリエーター）との衝突。
        しかし主人公は感情論に流されず、Bの悩みや創作の構造を
        徹底的に言語化・厳密化してあげることでBを救う。
        「言葉にすれば、解決できる」ことを証明する。
      value_change: "断絶 → 論理的和解"

    - id: RT-2
      label: "世界のデバッグ"
      description: >
        主人公は自信を深め、世界のあらゆる「バグ（曖昧さ）」を
        Constrain（厳密な定義）で修正していく。
        世界がクリアになり、多くの人が救われる（ように見える）。
        主人公は世界と分かり合えたと感じる。
      value_change: "混沌 → 秩序"

    - id: RT-3
      label: "Aへの断罪"
      description: >
        かつての友人（またはいじめっ子）Aが登場。
        Aは曖昧な感情や過去のしがらみに囚われている。
        主人公はAの問題点を鮮やかに言語化し、
        「君の苦しみは定義不足だ」と論破・解決しようとする。
      value_change: "対立 → 圧倒"

    - id: RT-4
      label: "問い（Ending）"
      description: >
        Aは論破され、ぐうの音も出ないが、深く傷つく。
        「お前の言うことは正しいよ。でも、痛いんだ」と言い残して去る（あるいは壊れる）。
        主人公は完璧な論理を手に入れたはずなのに、
        最後に残ったのはAの背中と、胸の痛み。
        「バグは取れた。仕様通りだ。……これでよかったのか？」
      value_change: "勝利 → 実存的敗北"

# ══════════════════════════════════════════════════════════════
# BRANCH: 恋愛クライシスルート
# ══════════════════════════════════════════════════════════════
branch_romance_crisis:
  parent: "main.act_2_branching_point"
  status: deferred
  label: "恋愛による覚醒"
  concept: "恋愛トラブルを主軸にするルート（重みが足りないため保留）"

# ══════════════════════════════════════════════════════════════
# BRANCH: 旅での覚醒ルート
# ══════════════════════════════════════════════════════════════
branch_travel_awakening:
  parent: "branch_faith_collapse"
  status: rejected
  label: "旅を通じた気づき"
  concept: "旅の描写が未定のためボツ"

# ══════════════════════════════════════════════════════════════
# 分岐の可視化（ASCII git graph）
# ══════════════════════════════════════════════════════════════
#
# main ──────── ACT1(再現性獲得) ──── ACT2(Constrain/エリート) ──┬── ACT3(瓦解→再統合) [REJECTED]
#                                                                 │
#                                                   ┌─────────────┤
#                                                   │             │
#                                         branch/tragedy          │ ★ preferred
#                                           │                     │
#                                           ├── TR-1: Aへの尋問（復讐）
#                                           ├── TR-2: Aの自殺（大失敗）
#                                           ├── TR-3: 復讐欲の自覚（心理的転回点）
#                                           ├── TR-4: 全否定（Constrain撤廃）
#                                           ├── TR-5: 組織崩壊（カオス）
#                                           └── TR-6: ジンテーゼ（統合）
#                                                                 │
#                                         branch/rigorous_triumph │ △ candidate
#                                           └── 厳密化の勝利       │
#
