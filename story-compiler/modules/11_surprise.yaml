# ============================================================
# Module: Surprise Evaluation
# Source: Robert McKee "Story" — 驚きの品質
# Version: 0.2
# ============================================================
# すべての「驚き」が良い驚きとは限らない。
# 安い驚き（cheap surprise）はストーリーを毀損する。
# コンパイラは驚きの品質を検証する。
# ============================================================

module_id: surprise
module_name: "驚き検証（Surprise Evaluation）"
source: "McKee 'Story'"

# ============================================================
# 驚きの定義（コンパイラ向け操作的定義）
# ============================================================
definition:
  description: >
    「驚き」とは、期待と結果のギャップが大きい状態。
    コンパイラはギャップの「内容」を検証する。

# ============================================================
# 安い驚き vs 構造的驚き
# ============================================================
quality_check:
  cheap_surprise_indicators:
    - "情報の不当な隠蔽（読者に知らせるべき情報を恣意的に隠した）"
    - "因果の外から来る出来事（deus ex machina）"
    - "後出しの新設定（それまでの物語で示唆されていない要素）"
    - "ランダムな暴力や死（因果なく唐突に発生）"

  structural_surprise_indicators:
    - "伏線が正しく敷かれている（retroactively inevitable）"
    - "因果連鎖の延長線上にある"
    - "主人公の選択の帰結である"
    - "振り返ると必然的に感じられる"

  detection_rule: >
    驚きのシーンで以下が成立するかチェック:
    1. その結果に至る因果が遡って確認できるか
    2. 読者に与えていた情報で解釈可能か
    3. キャラクターの行動原理と整合するか

# ============================================================
# コンパイル検証ルール
# ============================================================
validation:
  cheap_surprise_detected:
    severity: warning
    message: >
      「安い驚き」の兆候が検出されました。
      因果の裏付けがない驚きは読者の信頼を損ないます。
    suggestion: "伏線の追加、または既存の因果連鎖との接続を検討してください"

  no_surprise_in_climax:
    severity: warning
    message: "クライマックスに驚きの要素がありません"

  surprise_without_retroactive_inevitability:
    severity: warning
    message: >
      驚きはあるが「振り返ると必然的」ではありません。
      遡及的必然性（retroactive inevitability）を確保してください。
