<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Compiler System Map (API Spec)</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .card {
            background-color: #1e293b;
            border: 1px solid #334155;
        }

        .card:hover {
            border-color: #475569;
        }
    </style>
</head>

<body class="h-screen overflow-hidden flex flex-col">

    <div id="app" class="flex-1 flex flex-col h-full">
        <!-- Header -->
        <header class="bg-slate-900 border-b border-slate-800 p-4 flex justify-between items-center shrink-0">
            <div>
                <h1
                    class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400">
                    Story Compiler System Map
                </h1>
                <p class="text-xs text-slate-400 mt-1">Version 0.3 — Robert McKee "Story" Based Narrative Validation
                    Engine</p>
            </div>
            <div class="text-right text-xs text-slate-500">
                <p>Repository: <a href="https://github.com/KUWAOTA/novels"
                        class="text-blue-400 hover:underline">KUWAOTA/novels</a></p>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="flex-1 flex overflow-hidden">

            <!-- Sidebar -->
            <aside class="w-80 bg-slate-900 border-r border-slate-800 flex flex-col">
                <div class="p-4 border-b border-slate-800">
                    <input v-model="searchQuery" type="text" placeholder="Search modules..."
                        class="w-full bg-slate-800 border-none rounded px-3 py-2 text-sm text-slate-200 focus:ring-1 focus:ring-blue-500 placeholder-slate-500">
                </div>
                <div class="flex-1 overflow-y-auto p-2 space-y-1">
                    <div v-for="mod in filteredModules" :key="mod.id" @click="selectedModule = mod"
                        :class="{'bg-blue-600/20 text-blue-300 border-l-2 border-blue-500': selectedModule.id === mod.id, 'text-slate-400 hover:bg-slate-800 hover:text-slate-200 border-l-2 border-transparent': selectedModule.id !== mod.id}"
                        class="cursor-pointer px-3 py-3 rounded-r text-sm transition-colors duration-150">
                        <div class="font-bold truncate">{{ mod.name }}</div>
                        <div class="flex justify-between items-center mt-1">
                            <span class="font-mono text-[10px] opacity-70">{{ mod.id }}</span>
                            <span v-if="mod.errors > 0" class="text-[10px] bg-red-500/10 text-red-400 px-1.5 rounded">{{
                                mod.errors }} ERR</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto bg-slate-950 p-8 relative">
                <div v-if="selectedModule" class="max-w-4xl mx-auto pb-20">

                    <!-- Module Header -->
                    <div class="mb-8">
                        <div class="flex items-center gap-3 mb-2">
                            <span
                                class="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded text-xs font-mono border border-blue-500/30">
                                {{ selectedModule.id }}
                            </span>
                            <span class="text-xs text-slate-500 font-mono">
                                {{ selectedModule.filename }}
                            </span>
                        </div>
                        <h2 class="text-3xl font-bold text-slate-100 mb-2">{{ selectedModule.name }}</h2>
                        <div class="text-sm text-slate-400 italic mb-4">
                            Source: {{ selectedModule.source }}
                        </div>
                        <p
                            class="text-slate-300 leading-relaxed text-sm bg-slate-900/50 p-4 rounded-lg border border-slate-800">
                            {{ selectedModule.description }}
                        </p>
                    </div>

                    <!-- Inputs & Parameters -->
                    <div v-if="selectedModule.params && selectedModule.params.length > 0" class="mb-10">
                        <h3 class="text-lg font-bold text-slate-200 mb-4 flex items-center gap-2">
                            <span class="w-1 h-4 bg-teal-500 rounded-full"></span>
                            Configuration Schema (Inputs)
                        </h3>
                        <div class="overflow-x-auto rounded-lg border border-slate-700 bg-slate-900">
                            <table class="w-full text-left text-sm">
                                <thead class="bg-slate-800 text-slate-400 uppercase text-xs font-semibold">
                                    <tr>
                                        <th class="px-4 py-3">Variable Name</th>
                                        <th class="px-4 py-3">Type</th>
                                        <th class="px-4 py-3">Required</th>
                                        <th class="px-4 py-3">Description</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-800">
                                    <tr v-for="param in selectedModule.params" :key="param.name"
                                        class="hover:bg-slate-800/50">
                                        <td class="px-4 py-3 font-mono text-teal-300 font-medium">{{ param.name }}</td>
                                        <td class="px-4 py-3 text-purple-300 font-mono text-xs">{{ param.type }}</td>
                                        <td class="px-4 py-3">
                                            <span v-if="param.required"
                                                class="text-orange-400 text-xs font-bold">YES</span>
                                            <span v-else class="text-slate-600 text-xs">NO</span>
                                        </td>
                                        <td class="px-4 py-3 text-slate-400">{{ param.desc }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Logic & Algorithms -->
                    <div v-if="selectedModule.logic" class="mb-10">
                        <h3 class="text-lg font-bold text-slate-200 mb-4 flex items-center gap-2">
                            <span class="w-1 h-4 bg-purple-500 rounded-full"></span>
                            Core Logic / Algorithms
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div v-for="(item, key) in selectedModule.logic" :key="key" class="card rounded-lg p-4">
                                <h4 class="font-bold text-slate-200 mb-2 text-sm">{{ key }}</h4>
                                <pre
                                    class="p-3 bg-slate-950 rounded border border-slate-800 text-slate-400 font-mono text-xs whitespace-pre-wrap">{{ item }}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Validations -->
                    <div class="mb-10">
                        <h3 class="text-lg font-bold text-slate-200 mb-4 flex items-center gap-2">
                            <span class="w-1 h-4 bg-rose-500 rounded-full"></span>
                            Validation Rules (Compile Constraints)
                        </h3>
                        <div class="grid gap-4">
                            <div v-for="rule in selectedModule.validations" :key="rule.code"
                                class="card rounded-lg p-4 border-l-4" :class="{
                                    'border-l-rose-500': rule.severity === 'compile_error',
                                    'border-l-amber-500': rule.severity === 'warning',
                                    'border-l-emerald-500': rule.severity === 'info'
                                }">
                                <div class="flex justify-between items-start mb-2">
                                    <div class="flex items-center gap-2">
                                        <span class="font-mono text-xs font-bold px-2 py-0.5 rounded text-slate-950"
                                            :class="{
                                                'bg-rose-500': rule.severity === 'compile_error',
                                                'bg-amber-500': rule.severity === 'warning',
                                                'bg-emerald-500': rule.severity === 'info'
                                            }">
                                            {{ rule.severity.toUpperCase().replace('COMPILE_', '') }}
                                        </span>
                                        <span class="font-mono text-slate-300 font-bold text-sm">{{ rule.code }}</span>
                                    </div>
                                </div>
                                <p class="text-slate-300 text-sm mb-2 font-medium">{{ rule.message }}</p>
                                <p v-if="rule.logic"
                                    class="text-slate-500 text-xs border-t border-slate-700/50 pt-2 mt-2 font-mono">
                                    <span class="text-slate-600">TRIGGER: </span> {{ rule.logic }}
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
                <div v-else class="h-full flex items-center justify-center text-slate-600">
                    <p>Select a module from the sidebar to view specifications.</p>
                </div>
            </main>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        const modulesData = [
            {
                id: '01_core-structure',
                name: 'Core Structural Types',
                filename: '01_core-structure.yaml',
                source: "Robert McKee 'Story'",
                description: '物語の基本構造（階層）を定義するインターフェース。全ての物語単位（EventからActまで）で共通のプロパティ（ID, Summary, ValueChange）を強制するフラクタル構造。',
                errors: 2,
                params: [
                    { name: 'id', type: 'string', required: true, desc: '一意の識別子（例: S1, ACT2）' },
                    { name: 'summary', type: 'string', required: true, desc: '出来事の1行要約' },
                    { name: 'value_change', type: 'object', required: true, desc: '価値のfrom→to変化と原因' },
                    { name: 'value_axes', type: 'list[string]', required: true, desc: '変動する価値軸（例: 愛/憎しみ）' },
                    { name: 'continuity', type: 'object', required: true, desc: '時間・場所・POVの連続性定義' }
                ],
                validations: [
                    { code: 'missing_value_change', severity: 'compile_error', message: '全ての構造単位には価値変化（from->to）が必要です。変化のないシーンは死んでいます。', logic: 'value_change undefined OR value_change.from == value_change.to' },
                    { code: 'missing_id', severity: 'compile_error', message: '構造単位にIDが定義されていません。', logic: 'id IS NULL' },
                    { code: 'scale_violation', severity: 'warning', message: '下位単位（Beat）の価値変化が上位（Scene）より大きすぎます。', logic: 'diff(child.value) > diff(parent.value)' }
                ]
            },
            {
                id: '02_global-settings',
                name: 'Global Settings Gate',
                filename: '02_global-settings.yaml',
                source: "McKee 'Story' - Setting",
                description: '物語世界の基本法則（時代、期間、場所、争点レベル）を定義するゲート。これが宣言されない限り、ストーリー構造のコンパイルは開始されない。',
                errors: 1,
                params: [
                    { name: 'era', type: 'string', required: true, desc: '時代設定（例: 現代, 2050年）' },
                    { name: 'duration', type: 'string', required: true, desc: '物語全体の期間（例: 3日間）' },
                    { name: 'setting', type: 'string', required: true, desc: '物理的舞台（例: 渋谷）' },
                    { name: 'conflict_level', type: 'enum', required: true, desc: '[internal, personal, non_personal, combined]' },
                    { name: 'livelihood', type: 'string', required: true, desc: '登場人物の生計手段' }
                ],
                validations: [
                    { code: 'missing_field_gate', severity: 'compile_error', message: '必須のグローバル設定が欠落しています。Era, Duration, Setting等は必須です。', logic: 'Any required field IS NULL' }
                ]
            },
            {
                id: '03_climax-rules',
                name: 'Climax Rules',
                filename: '03_climax-rules.yaml',
                source: "McKee 'Story' - Climax",
                description: '物語の最重要ノードであるクライマックスの構造的要件。不可逆な価値変化と、統制概念（Theme）の証明を強制する。',
                errors: 4,
                params: [
                    { name: 'climax_beat', type: 'beat_ref', required: true, desc: 'クライマックスを含むビートID' },
                    { name: 'irreversible_change', type: 'boolean', required: true, desc: '変化が不可逆であるか' }
                ],
                logic: {
                    'MeaningIntensity Formula': 'Meaning = ValueShift * Irreversibility * CausalDensity * ExpectationGap',
                    'Meaning Definition': '意味とは、不可逆な価値連動変容であり、受け手の世界モデルの更新を強いるもの。'
                },
                validations: [
                    { code: 'no_climax', severity: 'compile_error', message: 'Act/Storyにクライマックスが定義されていません。', logic: 'climax node not found in unit' },
                    { code: 'reversible_change', severity: 'compile_error', message: 'クライマックスの変化が可逆的です。後戻りできない変化が必要です。', logic: 'irreversible_change == false' },
                    { code: 'controlling_idea_not_embodied', severity: 'compile_error', message: '統制概念がクライマックスで体現されていません。', logic: 'climax.outcome != controlling_concept.proof' },
                    { code: 'low_meaning_intensity', severity: 'warning', message: 'MeaningIntensityスコアが閾値(0.75)を下回っています。', logic: 'score < 0.75' }
                ]
            },
            {
                id: '04_story-triangle',
                name: 'Story Triangle',
                filename: '04_story-triangle.yaml',
                source: "McKee 'Story' - Plot types",
                description: 'プロットの形式（Archplot, Miniplot, Antiplot）を定義する。形式に応じて適用される制約ルールセットが切り替わる。',
                errors: 0,
                params: [
                    { name: 'plot_type', type: 'enum', required: true, desc: '[archplot, miniplot, antiplot]' }
                ],
                validations: [
                    { code: 'consistency_check', severity: 'warning', message: '選択されたプロット形式と実際の構造特性が矛盾しています（例: Archplotなのに受動的主人公）。', logic: 'plot_type == archplot AND protagonist.active == false' }
                ]
            },
            {
                id: '05_controlling-concept',
                name: 'Controlling Concept',
                filename: '05_controlling-concept.yaml',
                source: "McKee 'Story' - Theme",
                description: '物語を統制する中心命題（Theme）。「教条主義（Didacticism）」を回避し、対立概念とのバランスを検証する。',
                errors: 1,
                params: [
                    { name: 'controlling_concept', type: 'string', required: true, desc: '証明される命題（例: 愛は死を超える）' },
                    { name: 'opposing_concept', type: 'string', required: true, desc: '対立する命題（例: 愛は死に敗北する）' }
                ],
                validations: [
                    { code: 'didacticism_warning', severity: 'warning', message: '対立概念が弱すぎます。説教臭い物語になるリスクがあります。', logic: 'opposing_concept.weight < 0.3' }
                ]
            },
            {
                id: '06_protagonist',
                name: 'Protagonist Model',
                filename: '06_protagonist.yaml',
                source: "McKee 'Story' - Character",
                description: '主人公の行動設計。意志(Will)、欲望(Desire)、共感性(Empathy)をモデル化し、受動的な主人公や動機不足を検出する。',
                errors: 0,
                params: [
                    { name: 'will', type: 'string', required: true, desc: '意志力。困難に行動する力' },
                    { name: 'desire', type: 'string', required: true, desc: '意識的な欲望' },
                    { name: 'unconscious_desire', type: 'string', required: false, desc: '無意識の欲望（推奨）' },
                    { name: 'good_center', type: 'string', required: true, desc: '共感の核となる善性・資質' }
                ],
                logic: {
                    'Antagonistic Force Logic': 'If protagonist.drive == low THEN required_antagonistic_force > 0.7 ELSE > 0.4',
                    'Mentality Linkage': 'Mentality -> WorldView -> Interpretation -> Emotion -> Action'
                },
                validations: [
                    { code: 'insufficient_antagonistic_pressure', severity: 'compile_error', message: '消極的主人公に対して敵対圧力が不足しています。これでは動きません。', logic: 'protagonist.drive=low AND force < 0.7' },
                    { code: 'missing_good_center', severity: 'warning', message: '主人公に「善の中心（共感ポイント）」が定義されていません。', logic: 'good_center IS NULL' },
                    { code: 'told_not_shown_good_center', severity: 'warning', message: '善の中心が行動ではなく説明されています。', logic: 'good_center.evidence_scenes IS EMPTY' }
                ]
            },
            {
                id: '07_action-definition',
                name: 'Action Definition',
                filename: '07_action-definition.yaml',
                source: "McKee 'Story' - Action",
                description: '「アクション」とは単なる「動き」ではなく、「期待と結果のギャップを生む意図的な行動」である。ギャップのない行動は「ただの活動（activity）」として警告される。',
                params: [
                    { name: 'intention', type: 'string', required: true, desc: 'キャラクターの意図・期待' },
                    { name: 'result', type: 'string', required: true, desc: '実際の反応・結果' },
                    { name: 'gap', type: 'boolean', required: true, desc: '期待と結果にズレがあるか' }
                ],
                validations: [
                    { code: 'activity_warning', severity: 'warning', message: '期待と結果のギャップがありません。これは「アクション」ではなく「活動」です。', logic: 'intention == result' }
                ]
            },
            {
                id: '08_inciting-incident',
                name: 'Inciting Incident',
                filename: '08_inciting-incident.yaml',
                source: "McKee 'Story' - Plot",
                description: '物語を開始させる「契機事件」。日常のバランスを根本的に崩し、主人公に反応を強制するイベント。',
                errors: 1,
                params: [
                    { name: 'incident_type', type: 'enum', required: true, desc: '[causal, coincidental]' },
                    { name: 'value_at_stake', type: 'string', required: true, desc: 'リスクに晒された価値' }
                ],
                validations: [
                    { code: 'late_incident', severity: 'warning', message: '契機事件の発生が遅すぎます（全量の15%以降）。', logic: 'incident.position > total_length * 0.15' },
                    { code: 'no_disruption', severity: 'compile_error', message: '主人公の生活バランスを崩していません。', logic: 'balance_change == 0' }
                ]
            },
            {
                id: '09_subplot',
                name: 'Subplot Specs',
                filename: '09_subplot.yaml',
                source: "McKee 'Story' - Subplot",
                description: 'サブプロットの定義。メインプロットとは異なる価値軸で展開し、メインプロットとテーマ的に共鳴または対比される必要がある。',
                params: [
                    { name: 'relationship_to_main', type: 'enum', required: true, desc: '[thematic_contradiction, resonance, complicate]' }
                ],
                validations: [
                    { code: 'distraction_warning', severity: 'warning', message: 'サブプロットがメインプロットのクライマックスを邪魔しています。', logic: 'subplot.climax.position == main.climax.position' }
                ]
            },
            {
                id: '10_meaning',
                name: 'Meaning',
                filename: '10_meaning.yaml',
                source: "McKee 'Story' - Meaning",
                description: '「美的な感情（Aesthetic Emotion）」の生成。思考と感情の同時発火を「意味」と定義し、その最大化を目指す。',
                params: [],
                validations: [
                    { code: 'separation_warning', severity: 'warning', message: '感情と思考が分離しています。これらは同時に起こるべきです。', logic: 'emotion_peak != insight_peak' }
                ]
            },
            {
                id: '11_surprise',
                name: 'Surprise',
                filename: '11_surprise.yaml',
                source: "McKee 'Story' - Curiosity",
                description: '好奇心（Curiosity）とサスペンス（Suspense）の管理。チープな驚きではなく、後になって「必然だった」と分かる「真の驚き」を要求。',
                validations: [
                    { code: 'cheap_surprise', severity: 'error', message: '必然性のない驚きです。読者は騙されたと感じます。', logic: 'surprise.foreshadowing == NULL' }
                ]
            },
            {
                id: '12_exposition',
                name: 'Exposition (Show Don\'t Tell)',
                filename: '12_exposition.yaml', // Grouping related
                source: "McKee 'Story' - Exposition",
                description: '説明的情報の管理。台詞に情報を詰め込む「Info Dump」を検出し、情報の劇的な提示（争いの中での露出など）を推奨。',
                errors: 1,
                validations: [
                    { code: 'info_dump', severity: 'warning', message: '台詞中の情報密度が高すぎます。不自然な会話です。', logic: 'dialogue.info_density > 0.6' }
                ]
            },
            {
                id: '13_scene-transition',
                name: 'Scene Transition',
                filename: '13_scene-transition.yaml',
                source: "McKee 'Story' - Structure",
                description: 'シーン間の接続の品質。因果関係のない単なる時間経過（And then...）を排除する。',
                errors: 0,
                params: [
                    { name: 'transition_type', type: 'enum', required: true, desc: '[action, revelation, decision]' }
                ],
                validations: [
                    { code: 'weak_transition', severity: 'warning', message: 'シーン接続が弱いです。「しかし」「だから」で接続してください。', logic: 'link_type == "temporal_only"' }
                ]
            },
            {
                id: '14_causal-chain',
                name: 'Causal Chain Integrity',
                filename: '14_causal-chain.yaml',
                source: "McKee 'Story' - Logic",
                description: '因果の鎖（Causal Chain）。原因なき結果、結果なき原因を「論理の穴」として検出し、デウス・エクス・マキナを防ぐ。',
                errors: 2,
                params: [
                    { name: 'cause', type: 'ref', required: true, desc: 'このイベントの原因' },
                    { name: 'consequence', type: 'ref', required: true, desc: 'このイベントが引き起こす結果' },
                    { name: 'causal_link_type', type: 'enum', required: true, desc: '[direct, indirect, character, environmental]' }
                ],
                logic: {
                    'Coherence Scoring': 'Inciting Incident -> Climax の因果的整合性スコアを算出'
                },
                validations: [
                    { code: 'missing_cause', severity: 'compile_error', message: '原因が不明なイベントです（穴）。', logic: 'cause IS NULL' },
                    { code: 'orphan_event', severity: 'compile_error', message: '因果の鎖から孤立しています。', logic: 'cause IS NULL AND consequence IS NULL' },
                    { code: 'coincidence_overuse', severity: 'warning', message: '偶然に依存しすぎています。', logic: 'coincidence_count > threshold' },
                    { code: 'coherence_below_threshold', severity: 'warning', message: '契機事件とクライマックスの整合性が低いです。', logic: 'coherence_score < 0.65' }
                ]
            },
            {
                id: '15_genre-constraints',
                name: 'Genre Constraints',
                filename: '15_genre-constraints.yaml',
                source: "McKee 'Story' - Genre",
                description: 'ジャンルごとの必須要素（Conventions）とオブリガトリーシーン。読者の期待に応えるための約束事。',
                errors: 1,
                params: [
                    { name: 'genre', type: 'string', required: true, desc: '選択されたジャンル' }
                ],
                validations: [
                    { code: 'missing_convention', severity: 'compile_error', message: 'ジャンルの必須要素が欠けています。', logic: 'genre.required_scenes NOT IN story' }
                ]
            },
            {
                id: '16_choice-and-expression',
                name: 'Choice & Expression',
                filename: '16_choice-and-expression.yaml',
                source: "McKee 'Story' - Choice",
                description: '真の選択（ジレンマ）の定義。善vs悪の偽の選択ではなく、善vs善、悪vs悪の選択を要求する。',
                errors: 1,
                params: [],
                validations: [
                    { code: 'fake_choice', severity: 'compile_error', message: '選択が明白すぎます（善vs悪）。ジレンマになっていません。', logic: 'choice.option_a.value != choice.option_b.value' }
                ]
            },
            {
                id: '17_symbolism-and-image',
                name: 'Symbolism & Image',
                filename: '17_symbolism-and-image.yaml',
                source: "McKee 'Story' - Symbolism",
                description: '象徴とイメージシステム。象徴は「後から自然に立ち上がる」べきもので、強制されるものではない。',
                validations: [
                    { code: 'forced_symbolism', severity: 'warning', message: '象徴が不自然に強調されています。', logic: 'symbol.repetition > threshold AND narrative_relevance < low' }
                ]
            },
            {
                id: '18_tension-dynamics',
                name: 'Tension Dynamics',
                filename: '18_tension-dynamics.yaml',
                source: "McKee 'Story' - Rhythm",
                description: '緊張と緩和のリズム。クライマックスの前に必ず「緩和」が必要。一本調子な緊張は読者を麻痺させる。',
                validations: [
                    { code: 'monotone_tension', severity: 'warning', message: '緊張の緩和がありません。読者が疲弊します。', logic: 'tension_duration > threshold' }
                ]
            },
            {
                id: '19_scene-mastery',
                name: 'Scene Mastery',
                filename: '19_scene-mastery.yaml',
                source: "McKee 'Story' - Composition",
                description: 'シーン配置の最適化。同じ意味を持つシーンの重複を避け、効果が最大になる順序を探索する。',
                validations: [
                    { code: 'repetitive_scene', severity: 'info', message: '同じ価値変化を持つシーンが重複しています。統合を検討してください。', logic: 'sceneA.value_change == sceneB.value_change' }
                ]
            },
            {
                id: '20_interpretation-layer',
                name: 'Interpretation Layer',
                filename: '20_interpretation-layer.yaml',
                source: "McKee 'Story' - Insight",
                description: '解釈レイヤー。Insight（洞察）は読者の脳内で発生するもの。テキストに答えを書いてしまっていないかチェックする。',
                validations: [
                    { code: 'explicit_insight', severity: 'warning', message: '洞察（テーマの答え）を台詞で語らせています。サブテキストに埋め込んでください。', logic: 'dialogue.content contains theme.statement' }
                ]
            }
        ];

        const app = createApp({
            setup() {
                const searchQuery = ref('');
                const modules = ref(modulesData);
                const selectedModule = ref(modulesData[0]);

                const filteredModules = computed(() => {
                    if (!searchQuery.value) return modules.value;
                    const q = searchQuery.value.toLowerCase();
                    return modules.value.filter(m =>
                        m.name.toLowerCase().includes(q) ||
                        m.id.toLowerCase().includes(q) ||
                        m.description.toLowerCase().includes(q)
                    );
                });

                return {
                    searchQuery,
                    modules,
                    selectedModule,
                    filteredModules
                };
            }
        });

        app.mount('#app');
    </script>
</body>

</html>